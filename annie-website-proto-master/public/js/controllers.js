var demoApp=angular.module("demoApp.controllers",["tc.chartjs"]).controller("listController",["$scope","$http",function($scope,$http){$scope.movieFilter=null,$scope.movieList=null,$http.get("./data/imdb250.json").then(function(res){$scope.movieList=res.data}),movieFilter=function(movie){var keyword=new RegExp($scope.movieFilter,"i");return!$scope.movieFilter||keyword.test(movie.title)||keyword.test(movie.genre)||keyword.test(movie.director)||keyword.test(movie.actors)||keyword.test(movie.plot)||keyword.test(movie.language)||keyword.test(movie.country)}}]).controller("detailsController",["$scope","$http","$routeParams",function($scope,$http,$routeParams){function findMovie(arr,id){for(var i=0;i<arr.length;i+=1)if(arr[i].rank==id)return arr[i]}var rank=$routeParams.id,movies=null;$scope.movie=null,$http.get("./data/imdb250.json").then(function(res){movies=res.data,$scope.movie=findMovie(movies,rank)})}]).controller("galleryController",["$scope","$http",function($scope,$http){$scope.genreFilter=null,$scope.movieList=null,$http.get("./data/imdb250.json").then(function(res){$scope.movieList=res.data}),genreFilter=function(movie){var keyword=new RegExp($scope.genreFilter,"i");return!$scope.genreFilter||keyword.test(movie.genre)}}]).controller("statsController",["$scope","$http",function($scope,$http){function parseMovies(arr){for(var i=0;i<arr.length;i+=1){for(var movieLanguages=arr[i].language,j=0;j<movieLanguages.length;j+=1)movieLanguages[j]in languages?languages[movieLanguages[j]]+=1:languages[movieLanguages[j]]=1;for(var movieCountries=arr[i].country,j=0;j<movieCountries.length;j+=1)movieCountries[j]in countries?countries[movieCountries[j]]+=1:countries[movieCountries[j]]=1;arr[i].imdbRating in imdbRatings?imdbRatings[arr[i].imdbRating]+=1:imdbRatings[arr[i].imdbRating]=1,arr[i].metascore in metascores?metascores[arr[i].metascore]+=1:metascores[arr[i].metascore]=1,arr[i].rated in ratings?ratings[arr[i].rated]+=1:ratings[arr[i].rated]=1}}function parseData(dict){var arr=[],colorIndex=0;for(var key in dict)arr.push("undefined"==key?{value:dict[key],label:"No Scores",color:colors[colorIndex],highlight:highlightColors[colorIndex]}:{value:dict[key],label:key,color:colors[colorIndex],highlight:highlightColors[colorIndex]}),colorIndex==colors.length-1?colorIndex=0:colorIndex+=1;return arr}var colors=["#F7464A","#46BFBD","#FDB45C","#00FF99","#9966FF","#6699FF","#FFCC99"],highlightColors=["#FF5A5E","#5AD3D1","#FFC870","#4DFFB8","#B894FF","#94B8FF","#FFDBB8"],movies=null,languages={},countries={},imdbRatings={},metascores={},ratings={};$scope.languageData=[],$scope.countryData=[],$scope.ratingData=[],$scope.metaData=[],$scope.ratedData=[],$http.get("./data/imdb250.json").then(function(res){movies=res.data,parseMovies(movies),$scope.languageData=parseData(languages),$scope.countryData=parseData(countries),$scope.ratingData=parseData(imdbRatings),$scope.metaData=parseData(metascores),$scope.ratedData=parseData(ratings)}),$scope.languageOptions={responsive:!0,segmentShowStroke:!1,percentageInnerCutout:50,animationSteps:75,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:""},$scope.countryOptions={responsive:!0,segmentShowStroke:!1,percentageInnerCutout:0,animationSteps:75,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:""}}]);